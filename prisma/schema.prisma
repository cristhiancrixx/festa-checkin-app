generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

enum Role {
  ADMIN
  STAFF
}

model Invite {
  id           String   @id @default(cuid())
  token        String   @unique
  maxPeople    Int      @default(2)
  label        String?
  registeredAt DateTime?
  createdAt    DateTime @default(now())

  registration Registration?
}

model Registration {
  id          String   @id @default(cuid())
  inviteId    String   @unique
  invite      Invite   @relation(fields: [inviteId], references: [id], onDelete: Cascade)

  fullName    String
  instagram   String?
  phoneE164   String?
  phoneLast4  String?

  hasPlusOne  Boolean  @default(false)
  plusOneName String?

  createdAt   DateTime @default(now())

  checkin     Checkin?
}

model Checkin {
  id             String      @id @default(cuid())
  registrationId String      @unique
  registration   Registration @relation(fields: [registrationId], references: [id], onDelete: Cascade)
  checkedInAt    DateTime    @default(now())
  checkedInBy    String?
}
